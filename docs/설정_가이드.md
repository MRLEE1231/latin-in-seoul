# Latin in Seoul — 설정 가이드

## 무료 스택 설정 완료 ✅

프로젝트가 무료 스택으로 설정되었습니다:
- ✅ Next.js 14+ (App Router)
- ✅ Prisma ORM
- ✅ TypeScript
- ✅ Tailwind CSS

---

## 다음 단계: 데이터베이스 설정

### 1. Supabase 무료 계정 생성

1. [https://supabase.com](https://supabase.com) 접속
2. "Start your project" 클릭
3. GitHub 계정으로 로그인 (또는 이메일 가입)
4. "New Project" 클릭
5. 프로젝트 이름 입력 (예: `latin-in-seoul`)
6. 데이터베이스 비밀번호 설정 (기억해두세요!)
7. 지역 선택 (가장 가까운 지역)
8. "Create new project" 클릭

### 2. 데이터베이스 연결 정보 가져오기

1. Supabase 대시보드에서 프로젝트 선택
2. 좌측 메뉴에서 **Settings** 클릭
3. **Database** 메뉴 클릭
4. **Connection string** 섹션에서 **URI** 선택
5. 연결 문자열 복사 (형식: `postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres`)

### 3. 환경 변수 설정

1. 프로젝트 루트에 `.env` 파일 생성:

```bash
# .env 파일 생성 (Windows)
copy .env.example .env

# 또는 직접 생성
```

2. `.env` 파일에 데이터베이스 URL 입력:

```env
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres"
```

**주의**: `[YOUR-PASSWORD]`와 `[YOUR-PROJECT-REF]`를 실제 값으로 교체하세요!

### 4. 데이터베이스 마이그레이션 실행

```bash
# Prisma 클라이언트 생성
npm run db:generate

# 데이터베이스 마이그레이션 실행
npm run db:migrate
```

마이그레이션 이름을 입력하라고 하면 `init` 입력

### 5. 개발 서버 실행

```bash
npm run dev
```

브라우저에서 [http://localhost:3000](http://localhost:3000) 접속

---

## 유용한 명령어

### 개발
```bash
npm run dev          # 개발 서버 실행
npm run build        # 프로덕션 빌드
npm run start        # 프로덕션 서버 실행
```

### 데이터베이스
```bash
npm run db:generate  # Prisma 클라이언트 생성
npm run db:migrate   # 마이그레이션 실행
npm run db:studio    # Prisma Studio 실행 (GUI)
npm run db:push      # 스키마 변경사항 즉시 반영 (개발용)
```

---

## Prisma Studio 사용하기

데이터베이스를 시각적으로 관리할 수 있는 GUI 도구:

```bash
npm run db:studio
```

브라우저에서 [http://localhost:5555](http://localhost:5555) 자동으로 열립니다.

여기서:
- 게시글 추가/수정/삭제 가능
- 이미지 데이터 확인 가능
- 테이블 구조 확인 가능

---

## 테스트 데이터 추가하기

### 방법 1: Prisma Studio 사용

1. `npm run db:studio` 실행
2. `Post` 테이블 클릭
3. "Add record" 클릭
4. 데이터 입력 후 저장

### 방법 2: API 사용

```bash
# POST 요청 예시
curl -X POST http://localhost:3000/api/posts \
  -H "Content-Type: application/json" \
  -d '{
    "title": "강남 살사 수업",
    "content": "열정적인 살사 수업입니다.",
    "region": "GANGNAM",
    "danceType": "SALSA",
    "instructorName": "김강사",
    "classDescription": "매주 화요일, 목요일 오후 7시",
    "images": []
  }'
```

---

## 배포 준비

### Vercel 배포 (무료)

1. **GitHub에 프로젝트 푸시**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin [YOUR-GITHUB-REPO-URL]
   git push -u origin main
   ```

2. **Vercel에 배포**
   - [https://vercel.com](https://vercel.com) 접속
   - GitHub 계정으로 로그인
   - "Add New Project" 클릭
   - GitHub 저장소 선택
   - Environment Variables에 `DATABASE_URL` 추가 (Supabase에서 복사한 값)
   - "Deploy" 클릭

3. **자동 배포 완료!**
   - 이후 Git 푸시 시 자동으로 재배포됩니다.

---

## 문제 해결

### 데이터베이스 연결 오류

**오류**: `Can't reach database server`

**해결**:
1. `.env` 파일의 `DATABASE_URL` 확인
2. Supabase 프로젝트가 활성화되어 있는지 확인
3. 비밀번호에 특수문자가 있으면 URL 인코딩 필요 (`@` → `%40`)

### Prisma 클라이언트 오류

**오류**: `PrismaClient is not configured`

**해결**:
```bash
npm run db:generate
```

### 마이그레이션 오류

**오류**: `Migration failed`

**해결**:
1. Supabase 대시보드에서 데이터베이스 상태 확인
2. 기존 마이그레이션 삭제 후 재실행:
```bash
# prisma/migrations 폴더 삭제 (주의!)
npm run db:migrate
```

---

## 다음 단계

1. ✅ 데이터베이스 설정 완료
2. ✅ 개발 서버 실행 확인
3. 📝 게시글 작성 기능 추가 (관리자 페이지)
4. 🖼️ 이미지 업로드 기능 추가
5. 🔍 필터링 기능 개선
6. 🚀 Vercel 배포

---

*작성일: 2025-02-12 | 설정 가이드*
